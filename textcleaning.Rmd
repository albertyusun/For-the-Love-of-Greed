---
title: "textcleaning"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r initialize}
library(dplyr)
library(ggplot2)
library(tidytext)
library(stringr)

file <- "1690-1700.csv"
books <- read.csv(file)
```
```{r}
texts <- books$booktext
texts[2]
```

```{r the text cleaning}
remove_characters <- "ã€^â¦%£ˆ§Â/‰¢*#@²ãºã¨ª"

cleantext <- str_replace_all(texts, "\\[unnumbered\\]", "") %>%
  str_replace_all("Page Â", "") %>%
  str_replace_all("\\[Illustration\\]", "") %>%
  str_replace_all("\\[illustration\\]", "") %>%
  str_replace_all("\\u009d", "") %>%
  str_replace_all("["+remove_characters+"\\\\]", "") %>%
  str_replace_all("[1234567890]", "") %>%
  str_replace_all("&", "and") %>%
  str_replace_all("[:punct:]", "") %>%
  str_to_lower()

books$booktext <- cleantext
write.csv(books, file)
```
